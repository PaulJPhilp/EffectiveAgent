{
  "nodes": [
    {
      "id": "initialize_run",
      "type": "initialize-run",
      "next": [
        "load_profiles"
      ],
      "data": {
        "description": "Initializes a new persona generation run",
        "input_type": "PersonaInput",
        "output_type": "void"
      }
    },
    {
      "id": "load_profiles",
      "type": "load-profiles",
      "next": [
        "cluster_personas"
      ],
      "data": {
        "description": "Loads and validates user profiles",
        "input_type": "void",
        "output_type": "Profile[]"
      }
    },
    {
      "id": "cluster_personas",
      "type": "cluster-personas",
      "next": [
        "elaborate_personas"
      ],
      "data": {
        "description": "Clusters similar profiles together",
        "input_type": "Profile[]",
        "output_type": "Cluster[]"
      }
    },
    {
      "id": "elaborate_personas",
      "type": "elaborate-personas",
      "next": [
        "save_results"
      ],
      "data": {
        "description": "Elaborates clusters into detailed personas",
        "input_type": "Cluster[]",
        "output_type": "Persona[]"
      }
    },
    {
      "id": "save_results",
      "type": "save-results",
      "next": [
        "END"
      ],
      "data": {
        "description": "Saves final personas and generates summary",
        "input_type": "Persona[]",
        "output_type": "void"
      }
    }
  ],
  "edges": [
    {
      "from": "initialize_run",
      "to": "load_profiles",
      "conditions": [
        {
          "field": "status.overallStatus",
          "operator": "eq",
          "value": "running"
        }
      ]
    },
    {
      "from": "load_profiles",
      "to": "cluster_personas",
      "conditions": [
        {
          "field": "agentState.profiles.length",
          "operator": "gt",
          "value": 0
        }
      ]
    },
    {
      "from": "cluster_personas",
      "to": "elaborate_personas",
      "conditions": [
        {
          "field": "agentState.clusters.length",
          "operator": "gt",
          "value": 0
        }
      ]
    },
    {
      "from": "elaborate_personas",
      "to": "save_results",
      "conditions": [
        {
          "field": "agentState.personas.length",
          "operator": "gt",
          "value": 0
        }
      ]
    },
    {
      "from": "save_results",
      "to": "END"
    }
  ],
  "start_node_id": "initialize_run",
  "metadata": {
    "description": "Agent that generates personas from user profiles",
    "version": "1.0.0",
    "created": "2025-03-29T00:51:54.060Z",
    "updated": "2025-03-29T00:51:54.060Z"
  }
}